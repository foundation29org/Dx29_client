<div *ngIf="showingWizard">
  <div id="loading-layout-wizard" *ngIf="!loadedSymptoms">
    <div class="center-elements">
        <div><p class="centerSpinner"><i class="center-spinner fa fa-spinner fa-spin fa-3x fa-fw pink"></i></p></div>
    </div>
  </div>
</div>
<div *ngIf="!showingWizard" class="row col-md-12">
  <!-- Step 0.0 -->
  <!-- *ngIf="actualStep!='2.2' && actualStep!='2.4' && actualStep!='2.7' && actualStep!='2.8' && actualStep!='3.1' && actualStep!='4.1' && actualStep!='5.0'"-->
  <div class="col-sm-12 col-md-12 mt-3" style="margin-bottom:1em;" *ngIf="actualStep!='5.0'">
    <span *ngIf="maxStep<'5.0'" (click)="toggleMenu()" class="mb-2 chat-app-sidebar-toggle ft-align-justify font-large-1 mr-2 d-block d-sm-none d-md-none"></span>
    <!-- large devices and first time-->
    <div class="center-elements d-none d-sm-none d-md-none d-lg-block" *ngIf="maxStep<'5.0'">
      <span class="list-group-item no-border d-inline" [ngClass]="(actualStep == '0.0' || actualStep == '0.1' || actualStep == '0.2' )?'list-group-item bg-blue-grey bg-lighten-5 border-right-primary border-right-2':'list-group-item no-border'">
          00. {{'patnodiagdashboard.menu.Welcome' | translate }}
          <i *ngIf="actualStep>=1.0" class="fa fa-check danger"></i>
      </span>
      <span class="list-group-item no-border d-inline" [ngClass]="(actualStep == '1.0' )?'list-group-item bg-blue-grey bg-lighten-5 border-right-primary border-right-2':'list-group-item no-border'">
          01. {{'patnodiagdashboard.menu.Personal information' | translate }}
          <i *ngIf="actualStep>=2.0" class="fa fa-check danger"></i>
      </span>
      <span class="list-group-item no-border d-inline" [ngClass]="(actualStep == '2.0' || actualStep == '2.2' || actualStep == '2.3' || actualStep == '2.4' || actualStep == '2.5' || actualStep == '2.7' || actualStep == '2.8')?'list-group-item bg-blue-grey bg-lighten-5 border-right-primary border-right-2':'list-group-item no-border'">
          02. {{'patnodiagdashboard.menu.Your symptoms' | translate }}
          <i *ngIf="actualStep>=3.0" class="fa fa-check danger"></i>
      </span>
      <span class="list-group-item no-border d-inline" [ngClass]="(actualStep == '3.0' || actualStep == '3.1' || actualStep == '3.2' || actualStep == '3.3')?'list-group-item bg-blue-grey bg-lighten-5 border-right-primary border-right-2':'list-group-item no-border'">
          03. {{'patnodiagdashboard.menu.Your genetic information' | translate }}
          <i *ngIf="actualStep>=4.0" class="fa fa-check danger"></i>
      </span>
      <span class="list-group-item no-border d-inline" [ngClass]="(actualStep == '4.0' || actualStep == '4.1' || actualStep == '4.2' )?'list-group-item bg-blue-grey bg-lighten-5 border-right-primary border-right-2':'list-group-item no-border'">
          04. {{'patnodiagdashboard.menu.Final report' | translate }}
      </span>
    </div>
    <!-- Medium devices -->
    <div class="chat-sidebar d-none d-sm-block d-md-block d-lg-none" *ngIf="maxStep<'5.0'">
      <span class="list-group-item no-border d-inline" [ngClass]="(actualStep == '0.0' || actualStep == '0.1' || actualStep == '0.2' )?'list-group-item bg-blue-grey bg-lighten-5 border-right-primary border-right-2':'list-group-item no-border'">
          {{'patnodiagdashboard.menu.Step' | translate }} 0
          <i *ngIf="actualStep>=1.0" class="fa fa-check ml-2 danger"></i>
      </span>
      <span class="list-group-item no-border d-inline" [ngClass]="(actualStep == '1.0' )?'list-group-item bg-blue-grey bg-lighten-5 border-right-primary border-right-2':'list-group-item no-border'">
          {{'patnodiagdashboard.menu.Step' | translate }} 1
          <i *ngIf="actualStep>=2.0" class="fa fa-check ml-2 danger"></i>
      </span>
      <span class="list-group-item no-border d-inline" [ngClass]="(actualStep == '2.0' || actualStep == '2.2' || actualStep == '2.3' || actualStep == '2.4' || actualStep == '2.5' || actualStep == '2.7' || actualStep == '2.8')?'list-group-item bg-blue-grey bg-lighten-5 border-right-primary border-right-2':'list-group-item no-border'">
          {{'patnodiagdashboard.menu.Step' | translate }} 2
          <i *ngIf="actualStep>=3.0" class="fa fa-check ml-2 danger"></i>
      </span>
      <span class="list-group-item no-border d-inline" [ngClass]="(actualStep == '3.0' || actualStep == '3.1' || actualStep == '3.2' || actualStep == '3.3')?'list-group-item bg-blue-grey bg-lighten-5 border-right-primary border-right-2':'list-group-item no-border'">
          {{'patnodiagdashboard.menu.Step' | translate }} 3
          <i *ngIf="actualStep>=4.0" class="fa fa-check ml-2 danger"></i>
      </span>
      <span class="list-group-item no-border d-inline" [ngClass]="(actualStep == '4.0' || actualStep == '4.1' || actualStep == '4.2' )?'list-group-item bg-blue-grey bg-lighten-5 border-right-primary border-right-2':'list-group-item no-border'">
          {{'patnodiagdashboard.menu.Step' | translate }} 4
      </span>
    </div>
    <!-- end medium devices-->

    <!-- large devices and no first time-->
    <div class="float-right chat-sidebar" *ngIf="maxStep>='5.0' && actualStep<'5.0'">
      <button *ngIf="actualStep!='1.0'" (click)="goToStep('5.0')" class="btn btn-outline-danger btn-lg pointer list-group-item d-inline">
          {{'generics.Back' | translate }}
      </button>
      <button *ngIf="actualStep=='1.0'" [disabled]="actualStep=='1.0' && (basicInfoPatient.gender=='' || basicInfoPatient.birthDate ==null || basicInfoPatient.birthDate =='')" (click)="goToStep('5.0');updatePatient()" class="mb-0 btn btn-outline-danger btn-lg pointer list-group-item d-inline">
          {{'generics.Back' | translate }}
      </button>

      <span *ngIf="actualStep=='1.0' && (basicInfoPatient.gender=='' || basicInfoPatient.birthDate ==null || basicInfoPatient.birthDate =='')" class="font-small-2 d-block black">{{'generics.Fill in the required data' | translate }}</span>
      <!--<button type="button" class="btn btn-outline-danger btn-lg" (click)="goToStep('5.0')">Mis datos</button>-->
    </div>

  </div>
  <!--<div *ngIf="actualStep=='0.0'" class="row offset-md-3 col-md-6">-->
  <div *ngIf="actualStep=='0.0'" class="offset-md-3 col-md-6 col-lg-6">
      <div class="content-header text-left">
        00. {{'patnodiagdashboard.menu.Welcome' | translate }}
      </div>
      <p class="content-sub-header"></p>
    <section>
      <div class="mt-2">
        <p class="font-medium-2">{{'patnodiagdashboard.step00.msg1' | translate }}, {{userName}}</p>
        <p class="font-medium-2">{{'patnodiagdashboard.step00.msg2' | translate }} </p>
        <p class="font-medium-2">{{'patnodiagdashboard.step00.msg3' | translate }} </p>
        <p class="font-medium-2">{{'patnodiagdashboard.step00.msg4' | translate }}</p>
      </div>
      <div class="center-elements">
        <button type="button" class="btn btn-outline-danger btn-lg" (click)="goToStep('0.1')">{{'patnodiagdashboard.step00.btn1' | translate }}</button>
      </div>
    </section>
  </div>
  <!-- End Step 0.0 -->
  <!-- Step 0.1 -->
  <div *ngIf="actualStep=='0.1'"  class="offset-md-3 col-md-6 col-lg-6">
      <div class="content-header text-left">
        00. {{'patnodiagdashboard.menu.Welcome' | translate }}
      </div>
      <p class="content-sub-header"></p>
    <section>
      <div class="mt-2">
        <div class="row text-left">
			    <div class="col-md-12 mt-1">
			      <div class="card-columns">
			        <div class="card" style="background-color: white;">
			          <div class="card-content">
			            <div class="card-body font-medium-2">
                    <span class="danger d-inline">1. </span>
                    <span class="d-inline">{{'patnodiagdashboard.step01.msg1' | translate }} </span>
			            </div>
			          </div>
			        </div>
              <div class="card" style="background-color: white;">
			          <div class="card-content">
                  <div class="card-body font-medium-2">
                    <span class="danger d-inline">2. </span>
                    <span class="d-inline">{{'patnodiagdashboard.step01.msg2' | translate }} </span>
			            </div>
			          </div>
			        </div>
              <div class="card" style="background-color: white;">
			          <div class="card-content">
                  <div class="card-body font-medium-2">
                    <span class="danger d-inline">3. </span>
                    <span class="d-inline">{{'patnodiagdashboard.step01.msg3' | translate }} </span>
			            </div>
			          </div>
			        </div>
			      </div>
			    </div>
			  </div>
      </div>
      <div class="center-elements">
        <button type="button" class="btn btn-outline-danger btn-lg" (click)="goToStep('0.2')">{{'patnodiagdashboard.step01.btn1' | translate }}</button>
      </div>
    </section>
  </div>
  <!-- End Step 0.1 -->
  <!-- Step 0.2 -->
  <div *ngIf="actualStep=='0.2'"  class="offset-md-3 col-md-6 col-lg-6">

      <div class="content-header text-left">
        00. {{'patnodiagdashboard.menu.Welcome' | translate }}
      </div>
      <p class="content-sub-header"></p>

    <section>
      <div class="center-elements mt-2">
        <h4>{{'patnodiagdashboard.step02.msg1' | translate }}</h4>
        <p class="font-medium-2">{{'patnodiagdashboard.step02.msg2' | translate }}</p>
      </div>
      <div class="center-elements">
        <button type="button" class="btn btn-outline-danger btn-lg" (click)="goToStep('1.0')">{{'patnodiagdashboard.step02.btn1' | translate }}</button>
      </div>
    </section>
  </div>
  <!-- End Step 0.2 -->
  <!-- Step 0.3 -->
  <div *ngIf="actualStep=='1.0'"  class="offset-md-3 col-md-6 col-lg-6">

      <div class="content-header text-left">
        <span *ngIf="maxStep<'5.0'">01.</span> {{'patnodiagdashboard.menu.Personal information' | translate }}
      </div>
      <p class="content-sub-header"></p>

    <section>
      <div class="row mt-2">
        <p class="col-md-12">{{'patnodiagdashboard.step1-0.title1' | translate }}</p>
        <div class="col-md-12">
          <div class="form-group">
            <label for="gender">{{'patnodiagdashboard.step1-0.field1.title' | translate }}</label>
            <input type="text" id="patientName" class="form-control"  name="patientName" [(ngModel)]="basicInfoPatient.patientName" (change)="updatePatient()">
          </div>
        </div>
        <div class="col-md-12">
          <div class="form-group">
            <label for="gender">{{'personalinfo.Gender' | translate }}</label>
            <select id="gender" name="gender" class="form-control"  [(ngModel)]="basicInfoPatient.gender" (change)="updatePatient()">
              <option [ngValue]="null" disabled selected>--{{'generics.Please select' | translate }}--</option>
              <option value="male">{{'personalinfo.Male' | translate }}</option>
              <option value="female">{{'personalinfo.Female' | translate }}</option>
            </select>
            <p *ngIf="basicInfoPatient.gender==''" class="danger">{{'generics.required' | translate }}</p>
          </div>
        </div>
        <div class="col-md-12">
          <div class="form-group">
            <label for="birthDate">{{'personalinfo.Birth Date' | translate }}</label>
            <div>
              <input type="date" id="birthDate" class="form-control" name="birthDate" [(ngModel)]="basicInfoPatient.birthDate" (ngModelChange)="ageFromDateOfBirthday(basicInfoPatient.birthDate)">
              <p *ngIf="basicInfoPatient.birthDate ==null || basicInfoPatient.birthDate ==''" class="danger">{{'generics.required' | translate }}</p>
            </div>
          </div>
        </div>
        <div class="col-md-12">
          <div class="form-group">
            <label for="gender">{{'patnodiagdashboard.step1-0.field2.title' | translate }}</label>
            <select id="gender" name="gender" class="form-control"  [(ngModel)]="basicInfoPatient.relationship">
              <option [ngValue]="null" disabled selected>--{{'generics.Please select' | translate }}--</option>
              <option value="patient">{{'patnodiagdashboard.step1-0.field2.answer1' | translate }}</option>
              <option value="familiar">{{'patnodiagdashboard.step1-0.field2.answer2' | translate }}</option>
              <option value="other">{{'patnodiagdashboard.step1-0.field2.answer3' | translate }}</option>
            </select>
          </div>
        </div>
      </div>
      <div class="center-elements">
        <button *ngIf="maxStep<'5.0'" [disabled]="(basicInfoPatient.birthDate ==null || basicInfoPatient.birthDate =='') || basicInfoPatient.gender==''" type="button" class="btn btn-outline-danger btn-lg" (click)="goToStep('2.0');updatePatient()">{{'patnodiagdashboard.step1-0.btn1' | translate }}</button>
      </div>
    </section>
  </div>
  <!-- End Step 0.1 -->
  <!-- Step 2.0 -->
  <div *ngIf="actualStep=='2.0'" class="offset-md-2 col-md-8">

      <div class="content-header text-left">
        <span *ngIf="maxStep<'5.0'">02.</span> {{'patnodiagdashboard.menu.Your symptoms' | translate }}: {{'patnodiagdashboard.step2-0.title1' | translate }}
      </div>
      <p class="content-sub-header"></p>

    <section>
      <div class="mt-2 row col-md-12">
        <p>{{'patnodiagdashboard.step2-0.msg1' | translate }}</p>
        <p>{{'patnodiagdashboard.step2-0.msg2' | translate }}</p>
      </div>
      <div class="row" matchHeight ="card">
        <div class="col-lg-6 col-md-12">
            <div class="card">
                <div class="card-header text-center pb-0 height-75">
                    <span class="font-medium-2 danger">{{'generics.Option' | translate }} 1: {{'patdiagdashboard.titleoption1' | translate }}</span>
                </div>
                <div class="card-body height-200">
                    <div id="donut-chart1" class="center-elements">
                      <i class="fas fa-notes-medical fa-4x danger"></i>
                    </div>
                    <div class="card-block text-center mt-2">
                        <span class="font-medium-1 grey darken-1 text-bold-400">{{'patdiagdashboard.msgoption1' | translate }}</span>
                    </div>
                </div>
                <div class="card-footer bt-n">
                  <label class="btn btn-outline-danger btn-lg btn-block btn-round" style="text-transform: none;letter-spacing: 0px;cursor: pointer;">
                      {{'patdiagdashboard.buttonoption1' | translate }} <input type="file" (change)="onFileChangePDF($event, contentExtractorSteps)" style="display: none;">
                  </label>
                </div>
            </div>
        </div>
        <div class="col-lg-6 col-md-12">
            <div class="card">
                <div class="card-header text-center pb-0 height-75">
                    <span class="font-medium-2 danger">{{'generics.Option' | translate }}
                      <span>2</span>
                      : {{'patdiagdashboard.titleoption4' | translate }}
                    </span>
                </div>
                <div class="card-body height-200">
                    <div id="donut-chart1" class="center-elements">
                      <i class="fas fa-align-left fa-4x danger"></i>
                    </div>
                    <div class="card-block text-center mt-2">
                        <span class="font-medium-1 grey darken-1 text-bold-400">{{'patdiagdashboard.msgoption4.1' | translate }} <span *ngIf="isMobileOrTablet">{{'patdiagdashboard.msgoption4.2' | translate }}</span></span>
                    </div>
                </div>
                <div class="card-footer bt-n">
                  <button type="button" class="btn btn-outline-danger btn-lg btn-block btn-round" (click)="showPanelAddTextSymptoms(contentAddTextSymptoms)">{{'patdiagdashboard.buttonoption4' | translate }}​​​​</button>
                </div>
            </div>
        </div>
      </div>
      <div class="center-elements">
        <!--<button type="button" [ngClass]="(medicalText != '')?'btn btn-outline-danger btn-lg mb-0':'btn btn-outline-secondary btn-lg mb-0'" [disabled]="medicalText==''" (click)="onSubmitToExtractor()">Listo!</button>-->
        <button class="btn btn-outline-danger btn-lg  btn-round" (click)="goToStep('2.4')">{{'patnodiagdashboard.step2-0.btn1' | translate }}</button>
      </div>
    </section>
  </div>
  <!-- End Step 2.0 -->
  <!-- Step 2.2 -->
  <div *ngIf="actualStep=='2.2'">

      <div class="content-header text-left">
        <span *ngIf="maxStep<'5.0'">02.</span> {{'patnodiagdashboard.menu.Your symptoms' | translate }}: {{'patnodiagdashboard.step2-2.title1' | translate }}
      </div>
      <p class="content-sub-header"></p>

    <section>
      <div class="mt-2 row col-md-9">
        <p>{{'patnodiagdashboard.step2-2.msg1' | translate }} {{temporalSymptoms.length}} {{'patnodiagdashboard.step2-2.msg2' | translate }}</p>
      </div>
      <div class="row">
        <div class="col-lg-6" *ngFor="let hpo of temporalSymptoms ; let i = index">
          <!-- Card -->
            <div class="card chart-card">

              <!-- Card content -->
              <div class="p-2 row" [ngClass]="(i!= selectedInfoSymptomIndex)?'height-150 row':'row'">
                <div class="col-8">
                  <!-- Title -->
                  <h4 *ngIf="i!= selectedInfoSymptomIndex" class="card-title font-weight-bold" style="font-size:1rem;">{{ (hpo.name.length>40)? (hpo.name | slice:0:40)+'...':(hpo.name) }} <span *ngIf="hpo.synonyms==undefined" class="warning"> ({{'phenotype.Deprecated' | translate }})</span></h4>
                  <h4 *ngIf="i== selectedInfoSymptomIndex" class="card-title font-weight-bold" style="font-size:1rem;">{{hpo.name}} <span *ngIf="hpo.synonyms==undefined" class="warning"> ({{'phenotype.Deprecated' | translate }})</span></h4>
                  <!-- Text
                  <span class="card-text mb-4">
                    <h6 class="d-inline">{{'patdiagdashboard.Score' | translate }}:</h6> {{hpo.similarity | number}}
                  </span>-->
                  <p *ngIf="i!= selectedInfoSymptomIndex">
                  <!--<p>-->
                    <span *ngIf="hpo.def!='' && hpo.def!=null">{{ (hpo.def.length>150)? (hpo.def | slice:0:150)+'...':(hpo.def) }}</span>
                    <span *ngIf="hpo.comment !=undefined"><span *ngIf="(hpo.def=='' || hpo.def==null) && hpo.comment!=''">{{ (hpo.comment.length>150)? (hpo.comment | slice:0:150)+'...':(hpo.comment) }}</span></span>
                  </p>
                  <p *ngIf="i== selectedInfoSymptomIndex">
                    <span *ngIf="hpo.def!='' || hpo.comment!=''">
                      <span *ngIf="hpo.def!=''">{{hpo.def}}.</span>
                      <span *ngIf="hpo.comment!=''">{{hpo.comment}}</span>
                    </span>
                  </p>
                  <span *ngIf="i== selectedInfoSymptomIndex">
                    <h6 class="mt-2"><strong>{{'generics.External Links' | translate }}</strong></h6>
                    <a href="https://monarchinitiative.org/phenotype/{{hpo.id}}" target="_blank" title=" {{hpo.name}} ({{hpo.id}}): {{hpo.def}} {{hpo.comment}}">MONDO ({{hpo.id}})</a>
                  </span>
                </div>
                <div class="col-4">
                  <button (click)="changeStateSymptom(i)" [ngClass]="(hpo.checked==true)?'float-right btn btn-success mb-0 btn-fab':'float-right btn btn-secondary mb-0 btn-fab'" [disabled]=hpo.checked href="javascript:void(0)">
                    <i class="fa fa-check"></i>
                  </button>
                  <button (click)="changeStateSymptom(i)" [ngClass]="(hpo.checked==false)?'float-right btn btn-danger mr-1 mb-0 btn-fab':'float-right btn btn-secondary mr-1 mb-0 btn-fab'" [disabled]=!hpo.checked href="javascript:void(0)">
                    <i class="fa fa-times"></i>
                  </button>
                </div>

              </div>
              <div style="position: absolute;left: 83%;top: 120px;">
                <a *ngIf="i!= selectedInfoSymptomIndex" class="danger pull-right" style="cursor: pointer;" (click)="showMoreInfoSymptom(i);">
                  {{'generics.Read more' | translate }}
                </a>
                <a *ngIf="i== selectedInfoSymptomIndex" class="danger pull-right" style="cursor: pointer;" (click)="showMoreInfoSymptom(i);">
                  {{'generics.Read less' | translate }}
                </a>
              </div>
              <div *ngIf="i== selectedInfoSymptomIndex" class="classic-tabs ml-1">
                <ngb-tabset>
                  <ngb-tab>
                    <ng-template ngbTabTitle># / {{'dashboardpatient.Apparitions' | translate }}</ng-template>
                    <ng-template ngbTabContent>
                      <span *ngFor="let text of hpo.text ; let j = index">
                        <!--<span *ngIf="j==0" class="font-small-2 mb-0">{{text.text | slice:(text.positions[0]-40):(text.positions[0]-1)}} <b>{{text.text | slice:(text.positions[0]):(text.positions[1])}}</b>  {{text.text | slice:(text.positions[1]+1):(text.positions[1]+40)}}</span>-->
                        <span *ngIf="text.source && j== 0" class="font-small-2 mb-0">{{text.source}}</span>
                        <span *ngIf="!text.source && j== 0" class="font-small-2 mb-0">{{text.text | slice:(text.positions[0]-40):(text.positions[0]-1)}} <b>{{text.text | slice:(text.positions[0]):(text.positions[1])}}</b>  {{text.text | slice:(text.positions[1]+1):(text.positions[1]+40)}}</span>
                      </span>
                    </ng-template>
                  </ngb-tab>
                  <ngb-tab>
                    <ng-template ngbTabTitle>{{'generics.Synonyms' | translate }}</ng-template>
                    <ng-template ngbTabContent>
                      <p *ngFor="let synonym of hpo.synonyms ; let j = index">
                        <span>{{j+1}}. </span> <span >{{synonym}}</span>
                      </p>
                    </ng-template>
                  </ngb-tab>
                </ngb-tabset>
              </div>
              <!-- Classic tabs -->

            </div>
            <!-- Card -->
        </div>
      </div>
      <div class="center-elements">
        <button type="button" class="btn btn-outline-danger btn-lg" (click)="goToStep('2.3');saveSymptomsNcr();">{{'patnodiagdashboard.step2-2.btn1' | translate }}</button>
      </div>
    </section>
  </div>
  <!-- End Step 2.2 -->
  <!-- Step 2.3 -->
  <div *ngIf="actualStep=='2.3'" class="offset-md-2 col-md-8 offset-lg-3 col-lg-6">

      <div class="content-header text-left">
        <span *ngIf="maxStep<'5.0'">02.</span> {{'patnodiagdashboard.menu.Your symptoms' | translate }}: {{'patnodiagdashboard.step2-3.title1' | translate }}
      </div>
      <p class="content-sub-header"></p>

    <section>
      <div class="mt-2">
        <p>{{'patnodiagdashboard.step2-3.msg1' | translate }} {{temporalSymptoms.length}} {{'patnodiagdashboard.step2-3.msg2' | translate }}</p>
        <p>{{'patnodiagdashboard.step2-3.msg3' | translate }}</p>
      </div>
      <div class="center-elements">
        <button type="button" class="btn btn-outline-danger btn-lg" style="width: 3em;" (click)="goToStep('2.0')">{{'generics.Yes' | translate }}</button>
        <button type="button" class="ml-2 btn btn-outline-danger btn-lg" style="width: 3em;" (click)="goToStep('2.4')">{{'generics.No' | translate }}</button>
      </div>
    </section>
  </div>
  <!-- End Step 2.3 -->
  <!-- Step 2.4 -->
  <div *ngIf="actualStep=='2.4'" class="col-md-12">
    <div class="content-header text-left">
      <span *ngIf="maxStep<'5.0'">02.</span> {{'patnodiagdashboard.menu.Your symptoms' | translate }}: {{'patnodiagdashboard.step2-4.title1' | translate }}
    </div>
    <section class="row">
      <div class="mt-2 col-md-4">
        <div class="card p-2 row">
          <span class="col-md-12">
            <h4 class="font-weight-bold">{{'patnodiagdashboard.step2-4.msg5' | translate }}</h4>
          </span>
          <p class="col-md-12" *ngIf="selectedItems.length>0">
            <span class="d-block mb-2"><b>{{'patnodiagdashboard.step2-4.msg6' | translate }}</b></span>
            <span class="d-block" *ngFor="let item of selectedItems ; let k = index">
              {{item.name}} <span class="red" style="cursor: pointer;" (click)="deleteItem(item)">&nbsp;x</span>
            </span>
          </p>
          <p class="col-md-12" *ngIf="selectedItems.length==0">

          </p>
          <div class="center-elements">
            <span *ngIf="numDeprecated==phenotype.data.length && numDeprecated>0 ">
              <button *ngIf="selectedItems.length > 0" type="button" class="btn btn-outline-danger btn-lg" [disabled]='phenotype.data.length == 0 && selectedItems.length == 0' (click)="addSymptomsOption1();goToStep('2.8')">{{'diagnosis.Add symptoms' | translate }} {{'generics.and' | translate }} {{'patnodiagdashboard.step2-4.btn1' | translate }}</button>
              <button *ngIf="selectedItems.length == 0" type="button" class="btn btn-outline-danger btn-lg" [disabled]='phenotype.data.length == 0' (click)="goToStep('2.8')">
                {{'patnodiagdashboard.step2-4.btn1' | translate }}
                <span *ngIf="phenotype.data.length > 0 && selectedItems.length == 0" class="d-block font-small-2">{{'patnodiagdashboard.step2-4.msg3' | translate }}</span>
              </button>
            </span>
            <span *ngIf="(numDeprecated!=phenotype.data.length) || (numDeprecated==0 && selectedItems.length > 0)">
              <button *ngIf="selectedItems.length > 0" type="button" class="btn btn-outline-danger btn-lg" [disabled]='phenotype.data.length == 0 && selectedItems.length == 0' (click)="addSymptomsOption1();goToStep('2.5')">{{'diagnosis.Add symptoms' | translate }} {{'generics.and' | translate }} {{'patnodiagdashboard.step2-4.btn1' | translate }}</button>
              <button *ngIf="selectedItems.length == 0" type="button" class="btn btn-outline-danger btn-lg" [disabled]='phenotype.data.length == 0' (click)="goToStep('2.5')">
                {{'patnodiagdashboard.step2-4.btn1' | translate }}
                <span *ngIf="phenotype.data.length > 0 && selectedItems.length == 0" class="d-block font-small-2">{{'patnodiagdashboard.step2-4.msg3' | translate }}</span>
              </button>
            </span>
            <span *ngIf="phenotype.data.length == 0 && selectedItems.length == 0" class="d-block danger">{{'patnodiagdashboard.step2-4.msg4' | translate }}</span>
          </div>
        </div>

      </div>
      <div class="mt-2 col-md-8">
  			<div class="card p-2 row">
          <div class="form-group">
            <div class="mt-2 row col-md-9">
              <span class="d-block">{{'patnodiagdashboard.step2-4.msg1' | translate }}</span>
            </div>
            <input type="text" id="modelTemp" class="form-control"  name="modelTemp" [(ngModel)]="modelTemp" (keyup)="onKey($event)" placeholder="{{'patnodiagdashboard.step2-4.msg2' | translate }}">
          </div>

          <div *ngIf="listOfFilteredSymptoms.length > 0" class="row">
            <div class="col-lg-12 col-md-12" *ngFor="let hpo of listOfFilteredSymptoms ; let i = index">
              <!-- Card -->
                <div class="card chart-card" style="background-color: gainsboro;">

                  <!-- Card content -->
                  <div class="p-2 row" [ngClass]="(i!= selectedInfoSymptomIndex)?'height-150 row':'row'">
                    <div class="col-9">
                      <!-- Title -->
                      <h4 *ngIf="i!= selectedInfoSymptomIndex" class="card-title font-weight-bold" style="font-size:1rem;">{{ (hpo.name.length>40)? (hpo.name | slice:0:40)+'...':(hpo.name) }}</h4>
                      <!--<h4 *ngIf="i!= selectedInfoSymptomIndex" class="card-title font-weight-bold" style="font-size:1rem;">{{ (hpo.layperson.length>40)? (hpo.layperson | slice:0:40)+'...':(hpo.layperson) }}</h4>-->

                      <h4 *ngIf="i== selectedInfoSymptomIndex" class="card-title font-weight-bold" style="font-size:1rem;">{{hpo.name}}</h4>
                      <!--<h4 *ngIf="i== selectedInfoSymptomIndex" class="card-title font-weight-bold" style="font-size:1rem;">{{hpo.layperson}}</h4>-->

                      <p *ngIf="i!= selectedInfoSymptomIndex">
                        <span *ngIf="hpo.desc!=''">
                          <span *ngIf="hpo.desc!='' && hpo.desc!=null">{{ (hpo.desc.length>140)? (hpo.desc | slice:0:140)+'...':(hpo.desc) }}</span>
                        </span>
                      </p>
                      <p *ngIf="i== selectedInfoSymptomIndex">
                        <span *ngIf="hpo.desc!=''">
                          {{hpo.desc}}
                        </span>
                      </p>
                      <span *ngIf="i== selectedInfoSymptomIndex">
                        <h6 class="mt-2"><strong>{{'generics.External Links' | translate }}</strong></h6>
                        <a href="https://monarchinitiative.org/phenotype/{{hpo.id}}" target="_blank" title=" {{hpo.name}} ({{hpo.id}}): {{hpo.def}} {{hpo.comment}}">MONDO ({{hpo.id}})</a>
                      </span>
                    </div>
                    <div class="col-3">
                      <button (click)="selected2(i)" class="btn-success-over float-right btn btn-secondary mb-0 btn-fab" href="javascript:void(0)">
                        <i class="fa fa-check"></i>
                      </button>
                    </div>

                  </div>
                  <div style="position: absolute;left: 80%;top: 120px;">
                    <a *ngIf="i!= selectedInfoSymptomIndex" class="danger pull-right" style="cursor: pointer;" (click)="showMoreInfoSymptom(i);">
                      {{'generics.Read more' | translate }}
                    </a>
                    <a *ngIf="i== selectedInfoSymptomIndex" class="danger pull-right" style="cursor: pointer;" (click)="showMoreInfoSymptom(i);">
                      {{'generics.Read less' | translate }}
                    </a>
                  </div>
                  <div *ngIf="i== selectedInfoSymptomIndex && hpo.synonyms.length>0" class="p-2">
                    <h6>{{'generics.Synonyms' | translate }}</h6>
                    <p *ngFor="let synonym of hpo.synonyms ; let j = index">
                      <span>{{j+1}}. </span> <span >{{synonym}}</span>
                    </p>
                  </div>
                  <!-- Classic tabs -->

                </div>
                <!-- Card -->
            </div>
          </div>
        </div>
  		</div>

    </section>
  </div>
  <!-- End Step 2.4 -->
  <!-- Step 2.5 -->
  <div *ngIf="actualStep=='2.5'" class="offset-md-3 col-md-6 col-lg-6">

      <div class="content-header text-left">
        <span *ngIf="maxStep<'5.0'">02.</span> {{'patnodiagdashboard.menu.Your symptoms' | translate }}:  {{'patnodiagdashboard.step2-5.title1' | translate }}
      </div>
      <p class="content-sub-header"></p>

    <section>
      <div class="mt-2">
        <p>{{'patnodiagdashboard.step2-5.msg1' | translate }} {{phenotype.data.length}} {{'patnodiagdashboard.step2-5.msg2' | translate }}</p>
        <p>{{'patnodiagdashboard.step2-5.msg3' | translate }} </p>
        <p>{{'patnodiagdashboard.step2-5.msg4' | translate }} </p>
        <p>{{'patnodiagdashboard.step2-5.msg5' | translate }}</p>
      </div>
      <div class="center-elements">
        <button type="button" class="btn btn-outline-danger btn-lg" (click)="goToStep('2.7')">{{'patnodiagdashboard.step2-5.btn1' | translate }}</button>
        <button type="button" class="ml-2 btn btn-outline-danger btn-lg" (click)="goToStep('2.8')">{{'patnodiagdashboard.step2-5.btn2' | translate }}</button>
      </div>
    </section>
  </div>
  <!-- End Step 2.5 -->
  <!-- Step 2.7 -->
  <div *ngIf="actualStep=='2.7'">
    <a id="initpos" style="margin-top: -1000px"></a>
    <div class="content-header text-left">
      <span *ngIf="maxStep<'5.0'">02.</span> {{'patnodiagdashboard.menu.Your symptoms' | translate }}:  {{'patnodiagdashboard.step2-7.title1' | translate }}
    </div>
    <div class="mt-2 row col-md-9">
      <span>{{'patnodiagdashboard.step2-7.msg1' | translate }}</span>
      <span class="d-block">{{'patnodiagdashboard.step2-7.msg2' | translate }}</span>
    </div>
    <section class="row" *ngIf="!loadingSuggestions">
			<div class="col-md-12">

			</div>
		</section>
    <section class="row" *ngIf="loadingSuggestions || listOfSymptoms.length==0">
      <div class="col-md-12 center-elements mt-4">
				<i class="fa fa-spinner fa-spin fa-3x fa-fw pink"></i>
        <h5 class="mt-2 card-title font-weight-bold">{{'patnodiagdashboard.step2-7.title2' | translate }}</h5>
			</div>
		</section>
    <section *ngIf="!loadingSuggestions" class="row">
      <div class="mt-2 col-md-4">
        <div class="card p-2 row">
          <span class="col-md-12">
            <h4 class="font-weight-bold">{{'patnodiagdashboard.step2-4.msg5' | translate }}</h4>
          </span>
          <p class="col-md-12" *ngIf="stateOfSuggestions.added.length==0 && stateOfSuggestions.discarded.length==0 && stateOfSuggestions.unmarkedSymptoms.length==0">
            {{'patnodiagdashboard.step2-7.msg3' | translate }}
          </p>
          <p class="col-md-12" *ngIf="stateOfSuggestions.added.length>0">
            <span class="d-block mb-2"><b>{{'patnodiagdashboard.step2-7.msg4' | translate }}</b></span>
            <span class="d-block mb-2" *ngFor="let added of stateOfSuggestions.added ; let k = index" class="row mb-1">
              <span class="col-md-7">
                {{added.name}}
              </span>
              <span class="col-md-5">
                <a (click)="changeStateSuggestionsSymptom(k, 'discard')" class="ml-2 primary float-right" style="cursor: pointer;">Discard</a>
              </span>
              <!--<button (click)="changeStateSuggestionsSymptom(k, 'discard')" class="btn-danger-over float-right btn btn-secondary mr-1 mb-0 btn-fab" href="javascript:void(0)">
                <i class="fa fa-times"></i>
              </button>-->
            </span>
          </p>
          <p class="col-md-12" *ngIf="stateOfSuggestions.discarded.length>0">
            <span class="d-block mb-2"><b>{{'patnodiagdashboard.step2-7.msg5' | translate }}</b></span>
            <span class="d-block mb-2" *ngFor="let discarded of stateOfSuggestions.discarded ; let k = index" class="row mb-1">
              <span class="col-md-7">
                {{discarded.name}}
              </span>
              <span class="col-md-5">
                <a (click)="changeStateSuggestionsSymptom(k, 'add')" class="ml-2 primary float-right" style="cursor: pointer;">Add</a>
              </span>
              <!--<button (click)="changeStateSuggestionsSymptom(k, 'add')" class="btn-success-over btn-success-over float-right btn btn-secondary mb-0 btn-fab" href="javascript:void(0)">
                <i class="fa fa-check"></i>
              </button>-->
            </span>
          </p>
          <p class="col-md-12" *ngIf="stateOfSuggestions.unmarkedSymptoms.length>0">
            <a type="button" class="primary d-block" (click)="showContentUnmarkedSymptoms(contentUnmarkedSymptoms);">{{'patnodiagdashboard.step2-7.btn1' | translate }}<span class="d-block font-small-2">{{stateOfSuggestions.unmarkedSymptoms.length}} {{'patnodiagdashboard.step2-7.btn2' | translate }}</span></a>
          </p>
          <!--<hr width="100%" size="20" color="#b0b6bb" class="mt-2">
          <div class="col-md-12 d-block">
            <a *ngIf="posactual>0" class="float-left primary" (click)="previousDisease()">{{'patnodiagdashboard.step2-7.btn3' | translate }}</a>
            <a class="float-right primary " (click)="nextDisease()">{{'patnodiagdashboard.step2-7.btn4' | translate }}</a>
          </div>-->
          <hr width="100%" size="20" color="#b0b6bb" class="mt-2">
          <div class="col-md-12 mt-2 center-elements">
            <button type="button" class="btn btn-outline-danger btn-lg" (click)="goToStep('2.8');saveSymptomsToDb()">
              {{'patnodiagdashboard.step2-7.btn5' | translate }}
              <span *ngIf="stateOfSuggestions.added.length==0 && stateOfSuggestions.discarded.length==0 && stateOfSuggestions.unmarkedSymptoms.length==0" class="d-block font-small-2">{{'patnodiagdashboard.step2-7.btn5msg2' | translate }}</span>
              <span *ngIf="stateOfSuggestions.added.length>0" class="d-block font-small-2">{{'generics.Add' | translate }} {{stateOfSuggestions.added.length}} {{'phenotype.symptoms' | translate }}</span>
              <span *ngIf="stateOfSuggestions.discarded.length>0" class="d-block font-small-2">{{'patnodiagdashboard.step2-7.msg5' | translate }} {{stateOfSuggestions.discarded.length}} {{'phenotype.symptoms' | translate }}</span>
            </button>
          </div>
        </div>

      </div>
      <div class="mt-2 row col-md-8 row">
        <div class="col-lg-12" *ngFor="let hpo of listOfSymptoms ; let i = index">
          <!-- Card -->
            <div class="card chart-card">

              <!-- Card content -->
              <div class="p-2 row" [ngClass]="(i!= selectedInfoSymptomIndex)?'height-150 row':'row'">
                <div class="col-8">
                  <!-- Title -->
                  <h4 *ngIf="i!= selectedInfoSymptomIndex" class="card-title font-weight-bold" style="font-size:1rem;">{{ (hpo.name.length>40)? (hpo.name | slice:0:40)+'...':(hpo.name) }}</h4>
                  <h4 *ngIf="i== selectedInfoSymptomIndex" class="card-title font-weight-bold" style="font-size:1rem;">{{hpo.name}}</h4>
                  <!-- Text
                  <span class="card-text mb-4">
                    <h6 class="d-inline">{{'patdiagdashboard.Score' | translate }}:</h6> {{hpo.similarity | number}}
                  </span>-->
                  <p *ngIf="i!= selectedInfoSymptomIndex">
                    <span *ngIf="hpo.def!='' && hpo.def!=null">{{ (hpo.def.length>150)? (hpo.def | slice:0:150)+'...':(hpo.def) }}</span>
                    <span *ngIf="hpo.comment !=undefined"><span *ngIf="(hpo.def=='' || hpo.def==null) && hpo.comment!=''">{{ (hpo.comment.length>150)? (hpo.comment | slice:0:150)+'...':(hpo.comment) }}</span></span>
                  </p>
                  <p *ngIf="i== selectedInfoSymptomIndex">
                    <span *ngIf="hpo.def!='' || hpo.comment!=''">
                      <span *ngIf="hpo.def!=''">{{hpo.def}}.</span>
                      <span *ngIf="hpo.comment!=''">{{hpo.comment}}</span>
                    </span>
                  </p>
                  <span *ngIf="i== selectedInfoSymptomIndex">
                    <h6 class="mt-2"><strong>{{'generics.External Links' | translate }}</strong></h6>
                    <a href="https://monarchinitiative.org/phenotype/{{hpo.id}}" target="_blank" title=" {{hpo.name}} ({{hpo.id}}): {{hpo.def}} {{hpo.comment}}">MONDO ({{hpo.id}})</a>
                  </span>
                </div>
                <div class="col-4">
                  <button (click)="changeStateTempSymptom(i, true)" [ngClass]="(hpo.checked==true)?'float-right btn btn-success mb-0 btn-fab':'btn-success-over float-right btn btn-secondary mb-0 btn-fab'" href="javascript:void(0)">
                    <i class="fa fa-check"></i>
                  </button>
                  <button (click)="changeStateTempSymptom(i, false)" [ngClass]="(hpo.checked==false)?'float-right btn btn-danger mr-1 mb-0 btn-fab':'btn-danger-over float-right btn btn-secondary mr-1 mb-0 btn-fab'" href="javascript:void(0)">
                    <i class="fa fa-times"></i>
                  </button>
                </div>

              </div>
              <div style="position: absolute;left: 80%;top: 120px;">
                <a *ngIf="i!= selectedInfoSymptomIndex" class="danger pull-right" style="cursor: pointer;" (click)="showMoreInfoSymptom(i);">
                  {{'generics.Read more' | translate }}
                </a>
                <a *ngIf="i== selectedInfoSymptomIndex" class="danger pull-right" style="cursor: pointer;" (click)="showMoreInfoSymptom(i);">
                  {{'generics.Read less' | translate }}
                </a>
              </div>
              <div *ngIf="i== selectedInfoSymptomIndex" class="p-2">
                <h6>{{'generics.Synonyms' | translate }}</h6>
                <p *ngFor="let synonym of hpo.synonyms ; let j = index">
                  <span>{{j+1}}. </span> <span >{{synonym.label}}</span>
                </p>
              </div>
              <!-- Classic tabs -->

            </div>
            <!-- Card -->
        </div>
        <div class="col-sm-12" *ngIf="listOfSymptoms.length==0">
          {{'patdiagdashboard.noSymptomstoshow' | translate }}
        </div>
        <div class="col-md-12 d-block">
          <a *ngIf="posactual>0" class="float-left btn btn-outline-danger btn-lg" (click)="previousDisease()">{{'patnodiagdashboard.step2-7.btn3' | translate }}</a>
          <a class="float-right btn btn-outline-danger btn-lg " (click)="nextDisease()">{{'patnodiagdashboard.step2-7.btn4' | translate }}</a>
        </div>
      </div>
    </section>
  </div>
  <!-- End Step 2.7 -->
  <!-- Step 2.8 -->
  <div *ngIf="actualStep=='2.8'">

    <div class="content-header text-left">
      <span *ngIf="maxStep<'5.0'">02.</span> {{'patnodiagdashboard.menu.Your symptoms' | translate }}:  {{'patnodiagdashboard.step2-8.title1' | translate }}
    </div>
    <div class="mt-2 row col-md-9">
      <p>{{'patnodiagdashboard.step2-8.msg0' | translate }} <span *ngIf="stateOfSuggestions.added.length>0">{{'patnodiagdashboard.step2-8.msg1' | translate }} {{stateOfSuggestions.added.length}} {{'patnodiagdashboard.step2-8.msg2' | translate }}</span> {{'patnodiagdashboard.step2-8.msg3' | translate }} {{phenotype.data.length}} {{'patnodiagdashboard.step2-8.msg4' | translate }}</p>
      <p>{{'patnodiagdashboard.step2-8.msg5' | translate }}</p>

      <p>{{'patnodiagdashboard.step2-8.msg6' | translate }} </p>
    </div>

    <section class="row">
        <div class="col-lg-6" *ngFor="let hpo of phenotype.data ; let i = index">
          <!-- Card -->
            <div class="card chart-card">

              <!-- Card content -->
              <div class="p-2 row" [ngClass]="(i!= selectedInfoSymptomIndex)?'height-150 row':'row'">
                <div class="col-8">
                  <!-- Title -->
                  <h4 *ngIf="i!= selectedInfoSymptomIndex" class="card-title font-weight-bold" style="font-size:1rem;">{{ (hpo.name.length>40)? (hpo.name | slice:0:40)+'...':(hpo.name) }}</h4>
                  <h4 *ngIf="i== selectedInfoSymptomIndex" class="card-title font-weight-bold" style="font-size:1rem;">{{hpo.name}}</h4>
                  <span *ngIf="hpo.synonyms==undefined && numDeprecated>0" class="warning"> ({{'phenotype.Deprecated' | translate }})</span>
                  <!-- Text
                  <span class="card-text mb-4">
                    <h6 class="d-inline">{{'patdiagdashboard.Score' | translate }}:</h6> {{hpo.similarity | number}}
                  </span>-->
                  <p *ngIf="i!= selectedInfoSymptomIndex">
                    <span *ngIf="hpo.def!='' && hpo.def!=null">{{ (hpo.def.length>150)? (hpo.def | slice:0:150)+'...':(hpo.def) }}</span>
                    <span *ngIf="hpo.comment !=undefined"><span *ngIf="(hpo.def=='' || hpo.def==null) && hpo.comment!=''">{{ (hpo.comment.length>200)? (hpo.comment | slice:0:150)+'...':(hpo.comment) }}</span></span>
                  </p>
                  <p *ngIf="i== selectedInfoSymptomIndex">
                    <span *ngIf="hpo.def!='' || hpo.comment!=''">
                      <span *ngIf="hpo.def!=''">{{hpo.def}}.</span>
                      <span *ngIf="hpo.comment!=''">{{hpo.comment}}</span>
                    </span>
                  </p>
                  <span *ngIf="i== selectedInfoSymptomIndex">
                    <h6 class="mt-2"><strong>{{'generics.External Links' | translate }}</strong></h6>
                    <a href="https://monarchinitiative.org/phenotype/{{hpo.id}}" target="_blank" title=" {{hpo.name}} ({{hpo.id}}): {{hpo.def}} {{hpo.comment}}">MONDO ({{hpo.id}})</a>
                  </span>
                </div>
                <div class="col-4">
                  <button (click)="changeStateSymptomFinal(i)" [ngClass]="(hpo.checked==true)?'float-right btn btn-success mb-0 btn-fab':'float-right btn btn-secondary mb-0 btn-fab'" [disabled]=hpo.checked href="javascript:void(0)">
                    <i class="fa fa-check"></i>
                  </button>
                  <button (click)="changeStateSymptomFinal(i)" [ngClass]="(hpo.checked==false)?'float-right btn btn-danger mr-1 mb-0 btn-fab':'float-right btn btn-secondary mr-1 mb-0 btn-fab'" [disabled]=!hpo.checked href="javascript:void(0)">
                    <i class="fa fa-times"></i>
                  </button>
                </div>

              </div>
              <div style="position: absolute;left: 80%;top: 120px;">
                <a *ngIf="i!= selectedInfoSymptomIndex" class="danger pull-right mr-2" style="cursor: pointer;" (click)="showMoreInfoSymptom(i);">
                  {{'generics.Read more' | translate }}
                </a>
                <a *ngIf="i== selectedInfoSymptomIndex" class="danger pull-right mr-2" style="cursor: pointer;" (click)="showMoreInfoSymptom(i);">
                  {{'generics.Read less' | translate }}
                </a>
              </div>
              <div *ngIf="i== selectedInfoSymptomIndex" class="classic-tabs ml-1">
                <div *ngIf="hpo.synonyms!=undefined" class="p-2">
                  <h6>{{'generics.Synonyms' | translate }}</h6>
                  <p *ngFor="let synonym of hpo.synonyms ; let j = index">
                    <span>{{j+1}}. </span> <span >{{synonym}}</span>
                  </p>
                </div>
              </div>
              <!-- Classic tabs -->

            </div>
            <!-- Card -->
        </div>
    </section>
    <div class="center-elements">
      <button *ngIf="maxStep<'5.0'" type="button" class="btn btn-outline-danger btn-lg" (click)="goToStep('3.0');checkSymptomsToDb();">{{'patnodiagdashboard.step2-8.btn1' | translate }}</button>
      <button *ngIf="maxStep>='5.0'" type="button" class="btn btn-outline-danger btn-lg" (click)="goToStep('5.0');checkSymptomsToDb();">{{'patnodiagdashboard.step2-8.btn2' | translate }}</button>
    </div>
  </div>
  <!-- End Step 2.8 -->
  <!-- Step 3.0 -->
  <div *ngIf="actualStep=='3.0'" class="offset-md-3 col-md-6 col-lg-6">

      <div class="content-header text-left">
        03. {{'patnodiagdashboard.menu.Your genetic information' | translate }}
      </div>
      <p class="content-sub-header"></p>

    <section>
      <div class="mt-2">
        <p>{{'patnodiagdashboard.step3-0.msg1' | translate }}</p>
        <p>{{'patnodiagdashboard.step3-0.msg2' | translate }}</p>
      </div>
      <div class="center-elements">
        <button type="button" class="btn btn-outline-danger btn-lg" (click)="goToStep('3.1')">{{'patnodiagdashboard.step3-0.btn1' | translate }}</button>
        <button *ngIf="maxStep<'5.0'" type="button" class="ml-2 btn btn-outline-danger btn-lg" (click)="goToStep('4.0');setGeneticTestsToNone()">{{'patnodiagdashboard.step3-0.btn2' | translate }}</button>
        <button *ngIf="maxStep>='5.0'" type="button" class="ml-2 btn btn-outline-danger btn-lg" (click)="goToStep('5.0');setGeneticTestsToNone()">{{'patnodiagdashboard.step3-0.btn2' | translate }}</button>
      </div>
    </section>
  </div>
  <!-- End Step 3.0 -->
  <!-- Step 3.1 -->
  <div *ngIf="actualStep=='3.1'" class="col-md-12">

      <div class="content-header text-left">
        03. {{'patnodiagdashboard.menu.Your genetic information' | translate }}: {{'patnodiagdashboard.step3-1.title1' | translate }}
      </div>
      <p class="content-sub-header"></p>

    <section>
      <div class="mt-2">
        <p>{{'patnodiagdashboard.step3-1.msg1' | translate }}</p>
        <div class="pl-0 col-md-12">
          <div class="row">
            <div class="col-lg-6" *ngFor="let test of geneticTests ; let i = index">
              <!-- Card -->
                <div class="card chart-card">

                  <!-- Card content -->
                  <div class="p-2 row" [ngClass]="(i!= selectedInfoSymptomIndex)?'height-150 row':'height-150 row'">
                    <div class="col-8">
                      <!-- Title -->
                      <h4 class="card-title font-weight-bold" style="font-size:1rem;">{{test.translation}}</h4>
                    </div>
                    <div class="col-4">
                      <button (click)="changeStateTempGeneticTest(i, true)" [ngClass]="(test.checked==true)?'float-right btn btn-success mb-0 btn-fab':'btn-success-over float-right btn btn-secondary mb-0 btn-fab'" href="javascript:void(0)">
                        <i class="fa fa-check"></i>
                      </button>
                      <button (click)="changeStateTempGeneticTest(i, false)" [ngClass]="(test.checked==false)?'float-right btn btn-danger mr-1 mb-0 btn-fab':'btn-danger-over float-right btn btn-secondary mr-1 mb-0 btn-fab'" href="javascript:void(0)">
                        <i class="fa fa-times"></i>
                      </button>
                    </div>

                  </div>
                  <div style="position: absolute;left: 80%;top: 120px;" class="center-elements mb-1" *ngIf="test.name!='I do not know' && test.name!='None'">
                    <a *ngIf="i!= selectedInfoSymptomIndex" class="danger pull-right mr-2" style="cursor: pointer;" (click)="showMoreInfoSymptom(i);">
                      {{'generics.Read more' | translate }}
                    </a>
                    <a *ngIf="i== selectedInfoSymptomIndex" class="danger pull-right mr-2" style="cursor: pointer;" (click)="showMoreInfoSymptom(i);">
                      {{'generics.Read less' | translate }}
                    </a>
                  </div>
                  <div *ngIf="i== selectedInfoSymptomIndex" class="classic-tabs ml-1">
                    <ngb-tabset>
                    <ngb-tab>
                      <ng-template ngbTabTitle>{{'patnodiagdashboard.step3-1.msg3' | translate }}</ng-template>
                      <ng-template ngbTabContent>
                        <p>
                          <span *ngIf="test.scope!=''">
                            <span>{{test.scope}}</span>
                          </span>
                        </p>
                      </ng-template>
                    </ngb-tab>
                    <ngb-tab>
                      <ng-template ngbTabTitle>{{'patnodiagdashboard.step3-1.msg4' | translate }}</ng-template>
                      <ng-template ngbTabContent>
                        <p>
                          {{test.applications}}
                        </p>
                      </ng-template>
                    </ngb-tab>
                    <ngb-tab>
                      <ng-template ngbTabTitle>{{'patnodiagdashboard.step3-1.msg5' | translate }}</ng-template>
                      <ng-template ngbTabContent>
                        <p>
                          {{test.limitations}}
                        </p>
                      </ng-template>
                    </ngb-tab>
                  </ngb-tabset>
                  </div>
                  <!-- Classic tabs -->

                </div>
                <!-- Card -->
            </div>
          </div>
        </div>
      </div>
      <div class="center-elements">
        <button *ngIf="maxStep<'5.0'" type="button" class="btn btn-outline-danger btn-lg" (click)="goToStep('3.2')">{{'patnodiagdashboard.step3-1.btn3' | translate }}</button>
      </div>
    </section>
  </div>
  <!-- End Step 3.1 -->
  <!-- Step 3.2 -->
  <div *ngIf="actualStep=='3.2'" class="offset-md-3 col-md-6 col-lg-6">

      <div class="content-header text-left">
        03. {{'patnodiagdashboard.menu.Your genetic information' | translate }}: {{'patnodiagdashboard.step3-2.title1' | translate }}
      </div>
      <p class="content-sub-header"></p>

    <section>
      <div class="mt-2">
        <ng-template #popContent>
          <p>{{'exomiserSettings.Variant call file' | translate }} <a href="https://en.wikipedia.org/wiki/Variant_Call_Format" target="_blank">VCF</a> format.</p>
          <button class="pull-right mt-2" style="margin-top: 1em;margin-bottom: 1em;" (click)="p1.close()">{{'generics.Close' | translate }}</button>
        </ng-template>
        <p>
          {{'patnodiagdashboard.step3-2.msg1' | translate }} <b>{{'patnodiagdashboard.step3-2.msg2' | translate }}</b>{{'patnodiagdashboard.step3-2.msg3' | translate }}
          (<label for="VcfBlobName">{{'exomiserSettings.Whats is a VCF' | translate }} <i class="ft-help-circle danger"  style="cursor: pointer;" placement="down" #p1="ngbPopover" [ngbPopover]="popContent" popoverTitle="VCF file"></i></label>)
        </p>
        <p>{{'patnodiagdashboard.step3-2.msg4' | translate }}</p>
      </div>
      <div class="row">
        <div class="col-md-12">
          <div class="card">
            <div class="card">
              <div class="card-body">
                <div class="card-title">
                  <h4 class="text-bold-400">{{'patnodiagdashboard.step3-2.msg5' | translate }}</h4>
                </div>
                <div class="card-text" *ngIf="!uploadingGenotype && !preparingFile">
                  {{'patnodiagdashboard.step3-2.msg6' | translate }}
                </div>
                <div class="center-elements card-text mt-2">
                  <label class="btn btn-outline-danger" style="text-transform: none;letter-spacing: 0px;cursor: pointer;">
                      {{'patnodiagdashboard.step3-2.msg7' | translate }} <input type="file" (change)="onFileChangeVCF($event)" accept=".vcf, .vcf.gz, .pdf, .docx" style="display: none;">
                  </label>
                </div>
                <p *ngIf="preparingFile">
                  <small class="d-block">{{'generics.Preparing to upload' | translate }}</small>
                  <i class="fa fa-spinner fa-spin fa-3x fa-fw pink"></i>
                </p>
                <h4 *ngIf="uploadingGenotype" class="center-elements">{{'generics.Upload Progress' | translate }}: {{uploadProgress | async}}%</h4>
                <div class="mb-2" id="Widget-line-chart">
                  <span *ngIf="filesVcf.length==0 && otherGeneFiles.length==0">
                    <p class="mb-0"><i class="danger fa-3x fas fa-ban fa-fw"></i></p>
                    <p class="mt-0">{{'generics.No data' | translate }}</p>
                  </span>
                  <span *ngIf="filesVcf.length>0 || otherGeneFiles.length>0">
                    <div class="content-wrapper">
                      <div class="row col-md-12">
                        <div class="mb-4 w-100">
                          <table class="table">
                            <thead>
                              <tr>
                                <th>{{'dashboardpatient.Files uploaded' | translate }}</th>
                                <th></th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr *ngFor="let onefile of filesVcf; let i = index">
                                <td style="word-wrap: anywhere;">
                                  {{onefile.nameForShow}}
                                </td>
                                <td>
                                  <a class="danger" (click)="deleteVcfFile(onefile.name,i);" href="javascript:void(0)"><i class="ft-x"></i></a>
                                </td>
                              </tr>
                              <tr *ngFor="let onefile of otherGeneFiles; let i = index">
                                <td style="word-wrap: anywhere;">
                                  {{onefile.simplename}}
                                </td>
                                <td>
                                  <a class="danger" (click)="deleteOtherFile(onefile.name,i);" href="javascript:void(0)"><i class="ft-x"></i></a>
                                </td>
                              </tr>
                            </tbody>
                          </table>


                        </div>
                      </div>
                  </div>
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="center-elements" *ngIf="maxStep<'5.0'">
        <button type="button" class="btn btn-outline-danger btn-lg" (click)="goToStep('3.3')">{{'patnodiagdashboard.step3-2.btn1' | translate }}</button>
      </div>
    </section>
  </div>
  <!-- End Step 3.2 -->
  <!-- Step 3.3 -->
  <div *ngIf="actualStep=='3.3'" class="offset-md-3 col-md-6 col-lg-6">

      <div class="content-header text-left">
        03. {{'patnodiagdashboard.menu.Your genetic information' | translate }}: {{'patnodiagdashboard.step3-3.title1' | translate }}
      </div>
      <p class="content-sub-header"></p>

    <section>
      <div class="mt-2">
        <p>{{'patnodiagdashboard.step3-3.msg1' | translate }} </p>
      </div>
      <div class="center-elements">
        <button type="button" class="ml-2 btn btn-outline-danger btn-lg" (click)="goToStep('4.0')">{{'patnodiagdashboard.step3-3.btn1' | translate }}</button>
      </div>
    </section>
  </div>
  <!-- End Step 3.3 -->
  <!-- Step 4.0 -->
  <div *ngIf="actualStep=='4.0'" class="offset-md-3 col-md-6 col-lg-6">

      <div class="content-header text-left">
        04. {{'patnodiagdashboard.menu.Final report' | translate }}
      </div>
      <p class="content-sub-header"></p>

    <section>
      <div class="mt-2">
        <p>{{'patnodiagdashboard.step3-3.msg1' | translate }}</p>
      </div>
      <div class="center-elements">
        <button type="button" class="ml-2 btn btn-outline-danger btn-lg" (click)="goToStep('4.1')">{{'patnodiagdashboard.step3-3.btn1' | translate }}</button>
      </div>
    </section>
  </div>
  <!-- End Step 4.0 -->
  <!-- Step 4.1 -->
  <div *ngIf="actualStep=='4.1'" class="offset-md-2 col-md-8">

      <div class="content-header text-left">
        04. {{'patnodiagdashboard.menu.Final report' | translate }}: visualización
      </div>
      <p class="content-sub-header"></p>

    <section>
      <div class="mt-2 p-4 bg-white">
        <div style="position: absolute;left: 80%;">
          <img height="200px" src="assets/img/elements/qr.png" alt="">
        </div>
        <h1 class="text-bold-400"><b>{{basicInfoPatient.patientName}}</b></h1>
        <div class="chat-name pt-2" style="border-bottom: 1px solid #e4e7ed;">
  				<div class="media-body row">
            <!-- general info-->
            <div class="col-md-12">
    					<h4 class="text-bold-400 form-section">
    						<b><ins>{{'patnodiagdashboard.menu.Personal information' | translate }}</ins></b>
    					</h4>
              <p>
                <span *ngIf="age!=null" class="d-block">
                  <b>{{'patnodiagdashboard.step4-1.msg1' | translate }}:</b> {{age}}
                </span>
                <span class="d-block">
                  <b>{{'personalinfo.Birth Date' | translate }}:</b> <span *ngIf="basicInfoPatient.birthDate"> {{basicInfoPatient.birthDate | date}}</span>
                </span>
                <span class="d-block">
                  <b>{{'personalinfo.Gender' | translate }}:</b>
                  <span *ngIf="basicInfoPatient.gender=='male'"> {{'personalinfo.Male' | translate }}</span>
                  <span *ngIf="basicInfoPatient.gender=='female'"> {{'personalinfo.Female' | translate }}</span>
                </span>
              </p>
            </div>
            <!-- symptoms info-->
            <div class="col-md-12">
              <h4 class="mt-3 text-bold-400 form-section">
    						<b><ins>{{'patnodiagdashboard.step4-1.msg2' | translate }}</ins></b>
    					</h4>
              <div *ngIf="phenotype.data.length > 0" class="table-responsive">
                <table class="table">
                  <thead>
                    <tr>
                      <th class="rm-borders">{{'generics.Name' | translate }}</th>
                      <th class="rm-borders">ID</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let hpo of phenotype.data ; let i = index">
                      <td class="rm-borders">{{hpo.name}}</td>
                      <td class="rm-borders">{{hpo.id}}</td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <div *ngIf="phenotype.data.length == 0" class="table-responsive">
                {{'patnodiagdashboard.step4-1.msg3' | translate }}
              </div>
            </div>
            <!-- genetics info-->
            <div class="col-md-12">
              <h4 class="mt-3 text-bold-400 form-section">
    						<b><ins>{{'patnodiagdashboard.step4-1.msg4' | translate }}</ins></b>
    					</h4>
              <p class="mb-0"><b>{{'patnodiagdashboard.step4-1.msg5' | translate }}</b></p>
              <p class="row">
                <span *ngFor="let test of geneticTests ; let i = index"><span *ngIf="test.checked" class="col-md-6">{{test.translation}}</span></span> <!--<span *ngIf="i<geneticTests.length-1">, </span>-->
              </p>
              <p class="mb-0"><b>{{'patnodiagdashboard.step4-1.msg6' | translate }}</b></p>
              <p *ngIf="otherGeneFiles.length==0 && filesVcf.length==0"><span>{{'generics.No' | translate }}</span></p>
              <p *ngIf="otherGeneFiles.length>0 || filesVcf.length>0"><span>{{'generics.Yes' | translate }}</span></p>
            </div>
  				</div>
  			</div>
      </div>
      <div class="mt-4 center-elements">
        <button type="button" class="ml-2 btn btn-outline-danger btn-lg" (click)="goToStep('4.2')">{{'patnodiagdashboard.step4-1.btn1' | translate }}</button>
      </div>
    </section>
  </div>
  <!-- End Step 4.1 -->
  <!-- Step 4.2 -->
  <div *ngIf="actualStep=='4.2'" class="offset-md-1 col-md-10">

      <div class="content-header text-left">
        04. {{'patnodiagdashboard.menu.Final report' | translate }}: {{'patnodiagdashboard.step4-2.title1' | translate }}
      </div>
      <p class="content-sub-header"></p>

    <section class="row">
      <div class="mt-2 col-md-12">
        <p>{{'patnodiagdashboard.step4-2.msg1' | translate }}</p>
      </div>
        <div class="col-lg-6 col-md-12">
            <div class="card">
                <div class="card-header text-center pb-0 height-75">
                    <span class="font-medium-2 danger">{{'generics.Option' | translate }}
                      <span>1</span>
                      : {{'patnodiagdashboard.step4-2.msg2' | translate }}
                    </span>
                </div>
                <div class="card-body">
                    <div id="donut-chart1" class="center-elements">
                      <i class="fas fa-user-md fa-4x danger"></i>
                    </div>
                    <div class="height-150 card-block text-center mt-2">
                        <span class="font-medium-1 grey darken-1 text-bold-400">{{'patnodiagdashboard.step4-2.msg3' | translate }}</span>
                    </div>
                </div>
                <div class="card-footer bt-n">
                  <button type="button" class="height-75 btn btn-outline-danger btn-lg btn-block btn-round" (click)="showSharePanel('Clinical')">{{'patnodiagdashboard.step4-2.msg4' | translate }}</button>
                </div>
            </div>
        </div>
        <div class="col-lg-6 col-md-12">
            <div class="card">
                <div class="card-header text-center pb-0 height-75">
                    <span class="font-medium-2 danger">{{'generics.Option' | translate }}
                      <span>2</span>
                      : {{'patnodiagdashboard.step4-2.msg5' | translate }}
                    </span>
                </div>
                <div class="card-body">
                    <div id="donut-chart1" class="center-elements">
                      <i class="fas fa-users fa-4x danger"></i>
                    </div>
                    <div class="height-150 card-block text-center mt-2">
                        <span class="font-medium-1 grey darken-1 text-bold-400">{{'patnodiagdashboard.step4-2.msg6' | translate }}</span>
                    </div>
                </div>
                <div class="card-footer bt-n">
                  <button type="button" class="height-75 btn btn-outline-danger btn-lg btn-block btn-round" (click)="showSharePanel('User')">{{'patnodiagdashboard.step4-2.msg7' | translate }}</button>
                </div>
            </div>
        </div>
        <!--<div class="col-lg-4 col-md-12">
            <div class="card">
                <div class="card-header text-center pb-0 height-75">
                    <span class="font-medium-2 danger">{{'generics.Option' | translate }}
                      <span>3</span>
                      : {{'patnodiagdashboard.step4-2.msg8' | translate }}
                    </span>
                </div>
                <div class="card-body">
                    <div id="donut-chart1" class="center-elements">
                      <i class="fas fa-download fa-4x danger"></i>
                    </div>
                    <div class="height-150 card-block text-center mt-2">
                        <span class="font-medium-1 grey darken-1 text-bold-400">{{'patnodiagdashboard.step4-2.msg9' | translate }}</span>
                    </div>
                </div>
                <div class="card-footer bt-n">
                  <button type="button" class="height-75 btn btn-outline-danger btn-lg btn-block btn-round" (click)="goToStep('4.2')">{{'patnodiagdashboard.step4-2.msg10' | translate }}</button>
                </div>
            </div>
        </div>-->
    </section>
    <div class="mt-4 center-elements">
      <button type="button" class="ml-2 btn btn-outline-danger btn-lg" (click)="goToStep('5.0')">{{'patnodiagdashboard.step4-2.btn1' | translate }}</button>
    </div>
  </div>
  <div *ngIf="actualStep=='5.0'" class="col-md-12">
    <div class="mt-2 offset-md-2 col-md-8" *ngIf="programs.length>0">
      <ngb-alert type="light" [dismissible]="false" style="border-radius: 10px;box-shadow: 2px 5px #888;" *ngFor="let program of programs ; let i = index">
        <div class="danger" *ngIf="program.name == 'Genetic Program 1'">
          <button type="button" class="float-right btn btn-raised btn-secondary btn-sm" (click)="showProgramRequest(program, contentGeneticProgram)">{{'GeneticProgram.bannerbtn1' | translate }}</button>
          <span>
            <strong>{{'GeneticProgram.bannermsg1pat' | translate }}</strong>
            <strong class="d-block" *ngIf="!program.data[2].result">{{'GeneticProgram.bannermsg2.1' | translate }} {{dateGeneticProgram1|date}} {{'GeneticProgram.bannermsg2.2' | translate }}</strong>
          </span>

        </div>
      </ngb-alert>
    </div>
    <!--<div class="content-header text-left">
      {{'patnodiagdashboard.menu.My data' | translate }}
    </div>
    <p class="content-sub-header"></p>
    -->
    <section>
      <div class="mt-2 p-4 bg-white">
        <div style="position: absolute;left: 80%;">
          <img height="200px" src="assets/img/elements/qr.png" alt="">
        </div>
        <h1 class="text-bold-400"><b>{{basicInfoPatient.patientName}}</b></h1>
        <div class="chat-name pt-2" style="border-bottom: 1px solid #e4e7ed;">
          <div class="media-body row">
            <!-- general info-->
            <div class="col-md-12">
              <h4 class="text-bold-400 form-section">
                <b><ins>{{'patnodiagdashboard.menu.Personal information' | translate }}</ins></b> <a class="ml-2 font-medium-2 primary" (click)="goToStep('1.0')">{{'generics.Edit' | translate }}</a>
              </h4>
              <p>
                <span *ngIf="age!=null" class="d-block">
                  <b>{{'patnodiagdashboard.step4-1.msg1' | translate }}:</b> {{age}}
                </span>
                <span class="d-block">
                  <b>{{'personalinfo.Birth Date' | translate }}:</b> <span *ngIf="basicInfoPatient.birthDate"> {{basicInfoPatient.birthDate | date}}</span>
                </span>
                <span class="d-block">
                  <b>{{'personalinfo.Gender' | translate }}:</b>
                  <span *ngIf="basicInfoPatient.gender=='male'"> {{'personalinfo.Male' | translate }}</span>
                  <span *ngIf="basicInfoPatient.gender=='female'"> {{'personalinfo.Female' | translate }}</span>
                </span>
              </p>
            </div>
            <!-- symptoms info-->
            <div class="col-md-12">
              <h4 class="mt-3 text-bold-400 form-section">
                <b><ins>{{'patnodiagdashboard.step4-1.msg2' | translate }}</ins></b> <a class="ml-2 font-medium-2 primary" (click)="goToStep('2.8')">{{'generics.Edit' | translate }}</a> <a class="ml-2 font-medium-2 primary" (click)="goToStep('2.0')">{{'generics.Add' | translate }}</a>
              </h4>
              <div *ngIf="phenotype.data.length > 0" class="table-responsive">
                <table class="table">
                  <thead>
                    <tr>
                      <th class="rm-borders">{{'generics.Name' | translate }}</th>
                      <th class="rm-borders">ID</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let hpo of phenotype.data ; let i = index">
                      <td class="rm-borders">{{hpo.name}} <span *ngIf="hpo.synonyms==undefined && numDeprecated>0" class="warning"> ({{'phenotype.Deprecated' | translate }})</span></td>
                      <td class="rm-borders">{{hpo.id}}</td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <div *ngIf="phenotype.data.length == 0" class="table-responsive">
                {{'patnodiagdashboard.step4-1.msg3' | translate }}
              </div>
            </div>
            <!-- genetics info-->
            <div class="col-md-12">
              <h4 class="mt-3 text-bold-400 form-section">
                <b><ins>{{'patnodiagdashboard.step4-1.msg4' | translate }}</ins></b>
              </h4>
              <p class="mb-0 d-inline"><b>{{'patnodiagdashboard.step4-1.msg5' | translate }}</b></p> <a class="ml-2 font-medium-2 primary" (click)="goToStep('3.0')">{{'generics.Edit' | translate }}</a>
              <p class="row">
                <span *ngFor="let test of geneticTests ; let i = index"><span *ngIf="test.checked" class="col-md-6">{{test.translation}}</span></span> <!--<span *ngIf="i<geneticTests.length-1">, </span>-->
              </p>
              <p class="mb-0 d-inline"><b>{{'patnodiagdashboard.step4-1.msg6' | translate }}</b></p> <a class="ml-2 font-medium-2 primary" (click)="goToStep('3.2')">{{'generics.Edit' | translate }}</a>
              <p *ngIf="otherGeneFiles.length==0 && filesVcf.length==0"><span>{{'generics.No' | translate }}</span></p>
              <p *ngIf="otherGeneFiles.length>0 || filesVcf.length>0"><span>{{'generics.Yes' | translate }}</span></p>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>
</div>
<ng-template #contentAddTextSymptoms let-c="close" let-d="dismiss" appendTo="body">
    <div id="idHeader">
    </div>

    <div class="content-wrapper">
      <div class="row col-md-12">
        <div class="w-100 row">
          <div class="mt-3 col-md-12">
            <span class="font-medium-2">{{'phenotype.HPO phenotype extractor placeholder' | translate }}</span>
            <p>
              <small class="text-muted">{{'diagnosis.MsgExtractorField' | translate }} </small>
            </p>
          </div>
        </div>
        <button id="openModalSymptomsNcrButton" [hidden]="true" (click)="showPanelSymptomsNcr(contentSymptomsNcr)">.</button>
        <form class="form w-100" (ngSubmit)="c('Close click');onSubmitToExtractor(contentExtractorSteps);" #f="ngForm">
          <div class="form-body">
            <div class="row">
              <div [ngClass]="(loadingHpoExtractor==true)?'d-none':'col-md-12'">
                <div class="form-group">
                  <textarea class="form-control" style="width:100%;max-height: 30vh;height:30vh;" [(ngModel)]="medicalText" name="medicalText" placeholder="{{'phenotype.HPO phenotype extractor placeholder' | translate }}"></textarea>
                  <a *ngIf="medicalText.trim().length > 0" class="btn btn-outline-danger mb-0 mt-1" (click)="deleteText()" href="javascript:void(0)"><i class="fa fa-trash"></i></a>
                  <span *ngIf="parserObject.file" class="pull-right">{{'parser.msgOcrInline' | translate }}: <a (click)="parserObject.parserStrategy='OcrInline'; callParser()" href="javascript:void(0)">{{'parser.Advanced extraction' | translate }}</a></span>
                </div>
              </div>
              <div class="col-md-12 center-elements">
                <button *ngIf="!loadingHpoExtractor" type="button" type="submit" [disabled]="medicalText.trim().length <= 5" class="mt-2 font-large-1 btn btn-primary btn-raised">{{'patnodiagdashboard.step2-0.btn2' | translate }}</button>
              </div>
              <div class="row col-md-12 center-elements">
                  <p class="col-md-12 centerSpinner" *ngIf="loadingHpoExtractor"><i class="fa fa-spinner fa-spin fa-3x fa-fw pink"></i></p>
              </div>
            </div>
          </div>
        </form>
      </div>
  </div>
    <div class="modal-footer">
      <div class="form-actions center" *ngIf="!sending">
          <button type="button" class="btn btn-secondary btn-raised" (click)="c('Close click')">{{'generics.Close' | translate }}</button>
      </div>
    </div>
</ng-template>

<ng-template #contentUnmarkedSymptoms let-c="close" let-d="dismiss" appendTo="body">
		<div class="modal-header" id="idHeader">
			<h4>{{'patnodiagdashboard.step2-7.btn2' | translate }}</h4>
			<button type="button" class="close" aria-label="Close" (click)="c('Close click')">
				<span aria-hidden="true">&times;</span>
			</button>
		</div>

		<div class="content-wrapper mt-2">
			<div class="row col-md-12">
				<div class="col-md-12 row mb-4">
          <div class="col-md-4" *ngFor="let hpo of stateOfSuggestions.unmarkedSymptoms ; let i = index">
            <!-- Card -->
              <div class="card chart-card">

                <!-- Card content -->
                <div class="p-2 row" [ngClass]="(i!= selectedInfoSymptomIndex)?'height-150 row':'row'">
                  <div class="col-8" *ngIf="hpo.name">
                    <!-- Title -->
                    <h4 *ngIf="i!= selectedInfoSymptomIndex" class="card-title font-weight-bold" style="font-size:1rem;">{{ (hpo.name.length>40)? (hpo.name | slice:0:40)+'...':(hpo.name) }}</h4>
                    <h4 *ngIf="i== selectedInfoSymptomIndex" class="card-title font-weight-bold" style="font-size:1rem;">{{hpo.name}}</h4>
                    <!-- Text
                    <span class="card-text mb-4">
                      <h6 class="d-inline">{{'patdiagdashboard.Score' | translate }}:</h6> {{hpo.similarity | number}}
                    </span>-->
                    <p *ngIf="i!= selectedInfoSymptomIndex">
                      <span *ngIf="hpo.def!='' && hpo.def!=null">{{ (hpo.def.length>150)? (hpo.def | slice:0:150)+'...':(hpo.def) }}</span>
                      <span *ngIf="hpo.comment !=undefined"><span *ngIf="(hpo.def=='' || hpo.def==null) && hpo.comment!=''">{{ (hpo.comment.length>150)? (hpo.comment | slice:0:150)+'...':(hpo.comment) }}</span></span>
                    </p>
                    <p *ngIf="i== selectedInfoSymptomIndex">
                      <span *ngIf="hpo.def!='' || hpo.comment!=''">
                        <span *ngIf="hpo.def!=''">{{hpo.def}}.</span>
                        <span *ngIf="hpo.comment!=''">{{hpo.comment}}</span>
                      </span>
                    </p>
                    <span *ngIf="i== selectedInfoSymptomIndex">
                      <h6 class="mt-2"><strong>{{'generics.External Links' | translate }}</strong></h6>
                      <a href="https://monarchinitiative.org/phenotype/{{hpo.id}}" target="_blank" title=" {{hpo.name}} ({{hpo.id}}): {{hpo.def}} {{hpo.comment}}">MONDO ({{hpo.id}})</a>
                    </span>
                  </div>
                  <div class="col-4">
                    <button (click)="changeStateTempSymptom(i, true)" [ngClass]="(hpo.checked==true)?'float-right btn btn-success mb-0 btn-fab':'btn-success-over float-right btn btn-secondary mb-0 btn-fab'" href="javascript:void(0)">
                      <i class="fa fa-check"></i>
                    </button>
                    <button (click)="changeStateTempSymptom(i, false)" [ngClass]="(hpo.checked==false)?'float-right btn btn-danger mr-1 mb-0 btn-fab':'btn-danger-over float-right btn btn-secondary mr-1 mb-0 btn-fab'" href="javascript:void(0)">
                      <i class="fa fa-times"></i>
                    </button>
                    <div style="position: absolute;left: 50%;top: 80px;">
                      <a *ngIf="i!= selectedInfoSymptomIndex" class="danger pull-right mr-2" style="cursor: pointer;" (click)="showMoreInfoSymptom(i);">
                        {{'generics.Read more' | translate }}
                      </a>
                      <a *ngIf="i== selectedInfoSymptomIndex" class="danger pull-right mr-2" style="cursor: pointer;" (click)="showMoreInfoSymptom(i);">
                        {{'generics.Read less' | translate }}
                      </a>
                    </div>
                  </div>

                </div>

                <div *ngIf="i== selectedInfoSymptomIndex" class="p-2">
                  <h6>{{'generics.Synonyms' | translate }}</h6>
                  <p *ngFor="let synonym of hpo.synonyms ; let j = index">
                    <span>{{j+1}}. </span> <span >{{synonym}}</span>
                  </p>
                </div>
                <!-- Classic tabs -->

              </div>
              <!-- Card -->
          </div>

				</div>
			</div>
	</div>
</ng-template>

<ng-template #contentExtractorSteps let-c="close" let-d="dismiss" appendTo="body">
  <div class="modal-header" id="idHeader">
    <div class="content-header text-left">
      <h4>{{'patnodiagdashboard.step2-1.msg1' | translate }}</h4>
    </div>
  </div>
    <div class="content-wrapper">
      <div class="row col-md-12">
        <div class="offset-md-3 col-md-6 offset-lg-2 col-lg-8">
          <section>
            <div class="mt-2">
              <p>{{'patnodiagdashboard.step2-1.msg2' | translate }}</p>
              <div>
                <ol>
                  <li>
                    <p>{{'patdiagdashboard.document down into sentences' | translate }}
                      <span *ngIf="substepExtract==1"><i class="center-spinner fa fa-spinner fa-spin fa-fw pink"></i>
                      </span>
                      <span *ngIf="substepExtract>1"><i class="fa fa-check success"></i></span>
                    </p>
                  </li>
                  <li>
                    <p>{{'patdiagdashboard.translating the document' | translate }}
                      <span *ngIf="substepExtract==2"><i class="center-spinner fa fa-spinner fa-spin fa-fw pink"></i>
                      </span>
                      <span *ngIf="substepExtract>2"><i class="fa fa-check success"></i></span>
                    </p>
                  </li>
                  <li>
                    <p>{{'patdiagdashboard.extracting the symptoms' | translate }}
                      <span *ngIf="substepExtract==3"><i class="center-spinner fa fa-spinner fa-spin fa-fw pink"></i>
                      </span>
                      <span *ngIf="substepExtract>3"><i class="fa fa-check success"></i></span>
                    </p>
                  </li>
                </ol>
                <h3 class="center-elements text-bold-400 mt-4" *ngIf="substepExtract==4">{{'patnodiagdashboard.step2-1.msg3' | translate }}</h3>
              </div>
            </div>
            <div class="mb-4 center-elements" *ngIf="substepExtract==4">
              <button type="button" class="btn btn-outline-danger btn-lg" (click)="goToStep('2.2');c('Close click')">{{'patnodiagdashboard.step2-1.btn1' | translate }}</button>
            </div>
          </section>
        </div>
      </div>
  </div>
</ng-template>

<ng-template #contentGeneticProgram let-c="close" let-d="dismiss" appendTo="body">
  <form #programRequestform="ngForm" name="form" (ngSubmit)="inviteShare(programRequestform.form)" class="form form-register" validate>
  <div class="modal-header" id="idHeader">
    <div class="content-header text-left">
      <h4>{{'GeneticProgram.Title' | translate }}</h4>
      <div class="content-wrapper">
        <div class="card-header pb-0">
            <p class="content-sub-header">{{'GeneticProgram.SubTitle' | translate }} </p>
            <p>{{'GeneticProgram.contentUsermsg1a' | translate }} <a href="mailto:support@foundation29.org">{{'GeneticProgram.contentUsermsg1b' | translate }}</a> {{'GeneticProgram.contentUsermsg1c' | translate }} </p>
            <p>{{'GeneticProgram.contentUsermsg2a' | translate }} <a href="assets/documents/moreinfo_{{lang}}.PDF" target="_blank">{{'GeneticProgram.contentUsermsg2b' | translate }}</a></p>
        </div>
      </div>
    </div>
  </div>
    <div class="content-wrapper">
      <div class="card-body" *ngIf="actualProgram.result">
          <div class="row">
            <div class="col-md-12" *ngIf="!actualProgram.data[1].result">
              <!--<div *ngIf="!actualProgram.data[1].result" class="pb-0" style="padding: 1.5rem 1.5rem;">-->
              <p class="danger">** {{'GeneticProgram.requirements1' | translate }}</p>
            </div>
            <div class="col-md-12">
              <div class="form-group">
                <p>{{'GeneticProgram.contentUsermsg2c' | translate }}</p>
                <input type="email" class="form-control" name="email" id="email" placeholder="{{'generics.Email' | translate }}" ngModel required email #email="ngModel" autocomplete="email">
                <small class="form-text text-muted danger" *ngIf="!email.valid && (email.dirty || email.touched)">{{'generics.entervalidemail' | translate }}</small>
              </div>
            </div>
            <div class="col-md-12">
              <div class="form-group">
                <label for="consent">{{'GeneticProgram.dataField3' | translate }}</label>
                <mat-checkbox class="example-margin ml-1" name="terms2" ngModel required #terms2="ngModel" id="terms2"></mat-checkbox>
                <small class="form-text text-muted danger" *ngIf="!terms2.valid && (terms2.dirty || terms2.touched)">{{'generics.required' | translate }}</small>
              </div>
            </div>
          </div>

      </div>

    </div>
    <div class="modal-footer d-block">
      <div class="form-actions" *ngIf="!sending">
        <button type="button" class="btn btn-secondary btn-raised" (click)="c('Close click')">{{'GeneticProgram.contentUserclosebtn' | translate }}</button>
        <span *ngIf="actualProgram.result">
          <!--<button class="btn btn-primary btn-raised float-right" type="submit">{{'GeneticProgram.bannerbtn1' | translate }}</button>-->
          <div *ngIf="programRequestform.valid;then formValid else formError"></div>
          <ng-template #formValid><button class="btn btn-primary btn-raised float-right" type="submit">{{'GeneticProgram.bannerbtn1' | translate }}</button></ng-template>
          <ng-template #formError><button class="btn btn-primary btn-raised float-right" type="button" [disabled]="true" (click)="submitInvalidForm()">{{'GeneticProgram.bannerbtn1' | translate }}<span class="d-block font-small-2">{{'GeneticProgram.requirementsFields' | translate }}</span></button></ng-template>
        </span>
      </div>
      <span *ngIf="sending">
        <i class="fa fa-spinner fa-spin fa-3x fa-fw white"></i>
      </span>
    </div>
    </form>
</ng-template>
